---
title: redis命令简介 集合
date: 2020-07-08 09:25:12
categories: redis
index_img: /img/articles/redis.jpg
math: true
tags:
	- redis
	- 命令
	- 集合
	- set
---

# 集合

`redis`的集合键允许用户将任意多的各不相同的元素存储到集合中。

在`redis`中，集合与列表的区别主要包括：

1. 列表可以存储重复元素，而集合只会存储非重复元素，尝试将一个已经存在的元素添加到集合将会被忽略
2. 列表以有序的方式存储元素，而集合则以无序的方式存储元素
3. 由于列表与集合的底层实现不同，因此类似的操作命令的复杂度不相同



## sadd

**作用**：将一个或者多个元素添加到集合

**格式**：`sadd set element [element ...]`

**扩展**：

命令会返回成功添加的新元素的数量

因为集合不存储相同的元素，因此使用命令向集合中添加元素时，命令会自动忽略已经存在的元素，只将不存在于集合中的新元素添加到集合中



## srem

**作用**：从集合中移除一个或者多个已经存在的元素

**格式**：`srem set element [element ...]`

**扩展**：

命令会返回被移除的元素数量

如果给定的元素并不存在于集合中，则命令将忽略不存在的元素，只移除那些已经存在的元素



## smove

**作用**：将元素从源集合移动到目标集合

**格式**：`smove source target element`

**扩展**：

命令在移动操作成功执行后，将返回`1`

如果指定的元素并不存在于源集合中，则命令将返回`0`，表示移动操作执行失败

如果移动的元素已经存在于目标集合中，则命令仍然会将指定的元素从源集合移动到目标集合，从结果来看，这种移动不会改变目标集合包含的元素，只会导致被移动的元素从源集合中消失



## smembers

**作用**：获取集合包含的所有元素

**格式**：`smembers set`

**扩展**：

集合以无序的方式存储元素，因此获取的集合元素的顺序将会有所不同，不能依赖于命令返回的元素顺序



## scard

**作用**：获取集合包含的元素数量

**格式**：`scard set`



## sismember

**作用**：检查给定的元素是否存在于集合中

**格式**：`sismember set element`

**扩展**：

命令返回`1`表示给定的元素存在于集合中

命令返回`0`表示给定的元素不存在于集合中



## srandmember

**作用**：随机获取集合中的元素

**格式**：`srandmember set [count]`

**扩展**：

命令接受一个可选的参数`count`，用于指定用户想要获取的元素数量，若没有指定参数`count`，则默认只获取一个元素

**注意：被命令返回的元素依然存在于集合中，不会被移除**

如果参数`count`为正数，则命令将返回`count`个不重复的元素。当`count`大于集合中包含的元素数量时，命令将返回集合中包含的所有元素

如果参数`count`为负数，则命令将随机返回`abs(count)`个元素，并且这些元素中允许出现重复的元素



## spop

**作用**：随机地从集合中移除指定数量的元素

**格式**：`spop set [count]`

**扩展**：

命令接受一个可选的参数`count`，用于指定用户想要移除的元素数量，若没有指定参数`count`，则默认只移除一个元素

命令会返回被移除的元素

另外，命令只接受正数的`count`，如果提供负数的`count`将引发错误



## sinter & sinterstore

**作用**：对集合执行交集计算

**格式**：

`sinter set [set ...]`

`sinterstore destination_key set [set ...]`

**扩展**：

`sinter`命令计算给定的所有集合的交集，返回这个交集所包含的所有元素

`sinterstore`命令将给定集合的交集计算结果存储到指定的键里面，如果键已经存在，则命令会先删除已有的键。命令在执行完成后，会返回被存储的交集元素的数量



## sunion & sunionstore

**作用**：对集合执行并集计算

**格式**：

`siunion set [set ...]`

`sunionstore destination_key set [set ...]`

**扩展**：

`sunion`命令计算给定的所有集合的并集，返回这个并集所包含的所有元素

`sunionstore`命令将给定集合的并集计算结果存储到指定的键里面，如果键已经存在，则命令会覆盖已有的键。命令在执行完成后，会返回被存储的并集元素的数量



## sdiff & sdiffstore

**作用**：对集合执行差集计算

**格式**：

`sdiff set [set ...]`

`sdiffstore destination_key set [set ...]`

**扩展**：

`sdiff`命令计算给定的所有集合的差集，返回这个差集所包含的所有元素

`sdiffstore`命令将给定集合的差集计算结果存储到指定的键里面，如果键已经存在，则命令会覆盖已有的键。命令在执行完成后，会返回被存储的差集元素的数量