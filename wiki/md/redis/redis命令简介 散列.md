---
title: redis命令简介 散列
date: 2020-07-08 13:30:45
categories: redis
index_img: /img/articles/redis.jpg
tags:
	- redis
	- 散列
	- hash
---

# 散列

当多个字符串键存储的数据具有关联性时，管理这些数据的多个字符串键的成本比较高，在实际使用中，需要一种能够真正将相关联的数据打包起来存储与管理的数据结构，即`redis` 提供的散列键。

`redis` 的散列键会将一个键与一个散列在数据库中关联起来，用户可以在散列中为任意多的字段（`field`）设置值。

散列的字段与值可以是文本数据，也可以是二进制数据。



## hset

**作用**：为散列中指定的字段设置值

**格式**：`hset key field value`

**扩展**：

如果给定的字段并不存在于散列中，则命令是一次创建操作，返回`1`

如果给定的字段已经存在于散列中，则命令是一次更新操作，返回`0`



## hsetnx

**作用**：只在字段不存在的情况下，为其设置值

**格式**：`hsetnx key field value`



## hget

**作用**：获取字段的值

**格式**：`hget key field`

**扩展**：

如果用户给定的字段并不存在于散列中，则命令将返回一个空值



## hincrby

**作用**：对字段存储的整数值执行加法或者减法操作

**格式**：`hincrby key field increment`

**扩展**：

`redis`只为散列提供了用于执行加法操作的`hincrby`命令，没有为散列提供相应的用于执行减法操作的命令。

如果用户需要对字段存储的整数值执行减法操作，则需要将一个负的增量传递给命令，从而达到执行减法操作的目的

尝试对非整数值的字段执行命令，或者向命令提供非整数值增量，都会导致命令返回错误



## hincrbyfloat

**作用**：对字段存储的数字值执行浮点数加法或者减法操作

**格式**：`hincrbyfloat key filed increment`



## hstrlen

**作用**：获取字段值的字节长度

**格式**：`hstrlen key field`

**扩展**：

如果给定的字段，或者散列并不存在，则命令将返回`0`作为结果



## hexists

**作用**：用于检查给定的字段是否存在于散列中

**格式**：`hexists key field`

**扩展**：

如果散列中包含给定的字段，则命令返回`1`

如果散列中不包含给定的字段，则命令返回`0`

如果给定的散列并不存在，则命令对于这个散列所有字段的检查结果都是不存在



## hdel

**作用**：删除散列中指定的字段，以及其关联的值

**格式**：`hdel key field`

**扩展**：

如果给定的字段存在于散列中，并且被成功删除，则命令返回`1`

如果给定的字段不存在于散列中，则命令返回`0`

如果散列并不存在，则命令返回`0`



## hlen

**作用**：获取散列包含的字段数量

**格式**：`hlen key`



## hmset

**作用**：一次为多个字段设置值

**格式**：`hmset key field value [field value ...]`



## hmget

**作用**：一次获取多个字段的值

**格式**：`hmget key field [field ...]`



## hkeys & hvals & hgetall

**作用**：获取所有的字段、所有值、所有字段和值

**格式**：

`hkeys key`

`hvals key`

`hgetall key`

**扩展**：

如果给定的散列并不存在，则命令都将返回一个空的列表

`redis`散列包含的字段在底层是以无序的方式存储的。因此对于该三个命令，不应该对其返回的元素的排列顺序做任何的假设